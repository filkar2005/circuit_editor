Данная версия уже более-менее оптимизирована. (По сравнению с предыдущей версией - в 1.35 раз)

Довольно просто добавить circuit.update(), удобное решение уравнений. Нужно добавить,
наверное, ещё один список с элементами. Хотя дублировать, конечно, нехорошо. Но словарь, хоть и нужен,
но неудобен.

Теоретически, для расчёта схем с конденсаторами, требуется добавить перед решением 
уравнения подстановку уже известных значений (напряжение на клемах конденсатора, сопротивление
переменного резистора, состояние выключателя и т.д.)